---
title: 'An idiots guide to making 3D maps'
date: 2020-11-17
permalink: /posts/2020/11/3D map tutorial/
tags:
  - tutorial
  - Aerialod
  - maps
---

An idiot's guide to making 3D maps
======

I love old maps – partly because it’s always interesting to see how the world used to look, but mostly because they are just incredibly beautiful. So I’ve been really enjoying the work of [Sean Conway/@geo_spatialist](https://twitter.com/geo_spatialist) who combines vintage maps from all over the world with modern elevation data to create amazing 3D versions. I am also an idiot, but I try not to let that hold me back too much in life, so I thought it would be fun to try and create something similar. And somehow, it kind of works. This post is my attempt to explain this process so others can make their own maps like this:

![Islay 3D](C:\GitHub\Projects\VictimOfMaths.github.io\images\3D map blog\Image 1.png)

**I cannot emphasise enough that what I’m describing here is pretty much the limit of my understanding of most of the pieces of software involved. There may well be better or more efficient ways to do some or all of this (and I’m keen to know how if you do!), but this is the process I’ve stumbled upon. I’m going to try and describe it in a way that somebody who has never used any of the relevant bits of software before can understand. Hopefully.**

To start with, you need 3 free bits of software: [QGIS](https://download.qgis.org/), [GIMP](https://www.gimp.org/downloads/) and [Aerialod](https://ephtracy.github.io/index.html?page=aerialod). You also (obviously) need a nice map. The map I’m using here came from the excellent collection at the [National Library of Scotland](https://maps.nls.uk/) (you do have to pay for high-resolution scans of many of their maps), but I’m sure there are lots of other resources out there – I made [this image](https://twitter.com/VictimOfMaths/status/1328270152543203328?s=20) using a free map [from Norway](https://www.geonorge.no/) (because of course Norway has an amazing open map library). The last thing you need is some elevation data. This will be from some kind of [DEM/DTM/DSM](https://gisgeography.com/dem-dsm-dtm-differences/). Unless your map is very small scale, or pretty recent, you probably want DTM/DEM, which doesn’t include buildings, since they may well have changed. There may be things which have changed over time in DTM/DEM data – digging quarries or creating reservoirs, but there’s not much we can do about that. If you have access to [Digimap](https://digimap.edina.ac.uk/), you can download Ordnance Survey’s 5m or 50m resolution DTM for the UK. You can also download LiDAR elevation data for [England](https://environment.data.gov.uk/DefraDataDownload/?Mode=survey), [Wales](http://lle.gov.wales/GridProducts#data=LidarCompositeDataset) or [Scotland](https://remotesensingdata.gov.scot/data#/map) for free. I’m sure other resources are available. All elevation data is calculated on a grid, of some resolution, from 25cm for really detailed LiDAR data to 50m for big, country-scale datasets. It’s useful to have data at an appropriate resolution – using 25cm data for a map of the whole of the UK will destroy our computer with the size of the file, while using 50m data for a map of your local town will make everything look rather Minecrafty. I reckon 50m is fine for the whole country, 5m is better for a single OS sheet or similar.

Assuming we have assembled everything, let’s begin.

#### **Step 1 – Assembling the two layers**

Elevation data usually comes in a load of separate files corresponding to grid squares. If your elevation data is already in a single file, then you can skip straight to step 2. Otherwise, open QGIS, open the folder you’ve downloaded your elevation data to, and drag all of your .asc files into a new project. For this example, I’ve downloaded OS 5m DTM data, which looks like this:

![DTM data](C:\GitHub\Projects\VictimOfMaths.github.io\images\3D map blog\Image 2.png)

Where you have big relative elevation differences between squares, sometimes the squares won’t all be on the same scale and things will look blockier than this. Whether they are or not though, we need to join the squares into one single elevation file. We do this using the Merge function, which lives under Raster>Miscellaneous and brings up a box like this:

![QGIS merge](C:\GitHub\Projects\VictimOfMaths.github.io\images\3D map blog\Image 3.png)

Click on the 3 dots highlighted above, then Select All, OK and then click the Run button with the snazzy blue outline. QGIS will have a bit of a think, but once it’s done you can close the Merge window and you should have a single, elevation file. 

If you want to save a copy you can use Project>Import/Export>Export Map to Image, which will bring up this interface:

![QGIS save](C:\GitHub\Projects\VictimOfMaths.github.io\images\3D map blog\Image 4.png)

Select ‘Calculate from Layer’ and select the ‘Merged’ layer to automatically clip the boundaries to the edge of your merged elevation file. Or you can use ‘Draw on Canvas’ to just draw the bounding box you want. Than manually change the resolution to be as large as you can (the max is 3,000 dpi), while still keeping the Output Width and Height no larger than ~15,000 pixels (as Aerialod might get sad otherwise). Then just select Save to save a copy of the file as an image.

If you have downloaded multiple map tiles, then you can merge them using exactly the same process and save a copy of this.

**Step 2 – Reprojecting**

If you are lucky, your map and elevation data will use the same map projection, and you can skip straight onto step 3 (e.g. if you are using a post-WW2 OS map and OS DTM data). Unfortunately nice old maps often used weird map projections, in which case we will need to reproject our elevation data or it won’t align with our map. There are two options here:

i)          If you know what projections your map and elevation data are in (you need the EPSG codes) then you can use the Raster>Projections>Warp (Reproject) option in QGIS to translate your elevation data into the correct projection (OS maps are in EPSG 27700)

ii)          If you don’t know what projections are being used for at least one of the map or elevation data, or if you don’t know the EPSG codes (e.g. the 1901 Bartholomew’s map I’m using for this example used a Cassini projection centred on Delamere in Cheshire (obviously)) then you can manually reproject using the Georeferencer Plugin, which lives in the Raster menu.

First, save a copy of your merged elevation data, them open a new project in QGIS and drag your map into it. Then open Georeferencer